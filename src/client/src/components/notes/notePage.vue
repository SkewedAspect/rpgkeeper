<!----------------------------------------------------------------------------------------------------------------------
  -- Note Page
  --------------------------------------------------------------------------------------------------------------------->

<template>
    <MarkdownBlock id="note-page" :text="renderedContent" :class="`${ system }-system`" />
</template>

<!--------------------------------------------------------------------------------------------------------------------->

<style lang="scss">
    #note-page {
        & > p:first-child {
            margin-top: 0;
        }

        & > p:last-child {
            margin-bottom: 0;
        }
    }
</style>

<!--------------------------------------------------------------------------------------------------------------------->

<script lang="ts" setup>
    import { computed } from 'vue';
    import { marked } from 'marked';

    // Stores
    import { useSystemStore } from '../../lib/resource-access/stores/systems';

    // Components
    import MarkdownBlock from '../ui/markdownBlock.vue';

    //------------------------------------------------------------------------------------------------------------------
    // Component Definition
    //------------------------------------------------------------------------------------------------------------------

    interface Props
    {
        content : string;
    }

    const props = defineProps<Props>();

    //------------------------------------------------------------------------------------------------------------------
    // Refs
    //------------------------------------------------------------------------------------------------------------------

    const store = useSystemStore();

    //------------------------------------------------------------------------------------------------------------------
    // Computed
    //------------------------------------------------------------------------------------------------------------------

    const renderedContent = computed(() =>
    {
        return marked.parse(props.content, { async: false }) as string;
    });

    const system = computed(() =>
    {
        return store.current?.id;
    });
</script>

<!--------------------------------------------------------------------------------------------------------------------->

//----------------------------------------------------------------------------------------------------------------------
// Socket.IO Handler Utility
//----------------------------------------------------------------------------------------------------------------------

import type { Server } from 'socket.io';

// Interfaces
import type { RPGKMessage } from '@rpgk/core';

//----------------------------------------------------------------------------------------------------------------------

let sio : Server | undefined;

//----------------------------------------------------------------------------------------------------------------------

export function setSIOInstance(sioServer : Server) : void
{
    sio = sioServer;
}

export function broadcast(namespace : string, message : RPGKMessage) : void
{
    if(sio)
    {
        const ns = sio.of(namespace);
        ns.emit('message', message);
    }
}

//----------------------------------------------------------------------------------------------------------------------

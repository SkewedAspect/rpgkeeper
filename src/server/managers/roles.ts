// ---------------------------------------------------------------------------------------------------------------------
// Roles Manager
// ---------------------------------------------------------------------------------------------------------------------

// Models
import { Role } from '../models/role';

// Utils
import { getDB } from '../utils/database';

// ---------------------------------------------------------------------------------------------------------------------

export async function list() : Promise<Role[]>
{
    const db = await getDB();
    return (await db('role as r').select('r.role_id as id', 'r.name', 'r.permissions'))
        .map(Role.fromDB);
}

// ---------------------------------------------------------------------------------------------------------------------
